/**
 * swapper.js v1.0
 * UI navigation and transition utility
 * Copyright (c) 2012 Kik Interactive, http://kik.com
 * Released under the MIT license
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */

var Swapper=function(w,p,h,i){function q(a,b){var c=b.parentNode;c.lastchild===b?c.appendChild(a):c.insertBefore(a,b.nextSibling)}function o(a){a.parentNode&&a.parentNode.removeChild(a)}function j(a,b){a.style["-webkit-transform"]=b;a.style["-moz-transform"]=b;a.style["-ms-transform"]=b;a.style["-o-transform"]=b;a.style.transform=b}function l(a,b){b?(a.style["-webkit-transition"]="-webkit-"+b,a.style["-moz-transition"]="-moz-"+b,a.style["-ms-transition"]="-ms-"+b,a.style["-o-transition"]="-o-"+b,
a.style.transition=b):(a.style["-webkit-transition"]="",a.style["-moz-transition"]="",a.style["-ms-transition"]="",a.style["-o-transition"]="",a.style.transition="")}function m(a,b){var c;c=b?a.style:p.defaultView.getComputedStyle(a,null);return{display:c.display,opacity:c.opacity,top:c.top,left:c.left,height:c.height,width:c.width,position:c.position}}function r(a){var b;a:if(a){try{b=a instanceof Node||a instanceof HTMLElement;break a}catch(c){}b="object"!==typeof a||"number"!==typeof a.nodeType||
"string"!==typeof a.nodeName?!1:!0}else b=!1;if(!b)throw TypeError("element must be a DOM node, got "+a);}function f(a,b,c,g){function h(){o(a);l(a,"");l(b,"");setTimeout(function(){j(a,"");j(b,"");e[0].fade&&(b.style.opacity=k.opacity);e[1].fade&&(a.style.opacity=v.opacity);b.style.position=k.position;b.style.top=k.top;b.style.left=k.left;b.style.height=k.height;b.style.width=k.width;a._swapper=!1;b._swapper=!1;g()},0)}r(a);r(b);"function"===typeof c&&(g=c,c={});switch(typeof c){case "string":c=
{transition:c};break;case "undefined":c={};break;case "object":break;default:throw TypeError("options must be an object if defined, got "+c);}switch(typeof c.transition){case "string":if(!(c.transition in s)&&"instant"!==c.transition)throw TypeError(c.transition+" is not a valid transition");break;case "undefined":break;default:throw TypeError("transition must be a string if defined, got "+c.transition);}switch(typeof c.duration){case "number":if(0>c.duration)throw TypeError("duration must be a non-negative integer, got "+
c.duration);break;case "undefined":break;default:throw TypeError("duration must be a number if defined, got "+c.duration);}switch(typeof c.easing){case "string":if(!(c.easing in t))throw TypeError(c.easing+" is not a valid easing");break;case "undefined":break;default:throw TypeError("easing must be a string if defined, got "+c.easing);}var d=g;switch(typeof d){case "undefined":d=function(){};case "function":break;default:throw TypeError("callback must be a function if defined, got "+d);}g=d;if(a._swapper)throw Error("elem1 is currently being swapped");
if(b._swapper)throw Error("elem2 is currently being swapped");a:{for(d=a;d=d.parentNode;)if(d===p){d=!0;break a}d=!1}if(!d)throw Error("elem1 must be in the DOM to be swapped");a._swapper=!0;b._swapper=!0;o(b);if("instant"===c.transition)q(b,a),o(a),a._swapper=!1,b._swapper=!1,setTimeout(function(){g()},0);else{var e=s[c.transition||"fade"],i=t[c.easing||"ease-in-out"],f=c.duration||300;q(b,a);var c=a.getBoundingClientRect(),d=m(a),u=m(b),v=m(a,!0),k=m(b,!0);"none"!==d.display&&(b.style.position=
"fixed",b.style.top=c.top+"px",b.style.left=c.left+"px");b.style.height=u.height||d.height;b.style.width=u.width||d.width;j(a,n);j(b,e[0].transform||n);e[0].fade&&(b.style.opacity="0");e[1].fade&&(a.style.opacity="1");setTimeout(function(){var c="transform "+f/1E3+"s "+i+", opacity "+f/1E3+"s "+i;l(a,c);l(b,c);setTimeout(function(){j(a,e[1].transform||n);j(b,n);if(e[0].fade)b.style.opacity="1";if(e[1].fade)a.style.opacity="0";setTimeout(h,f)},0)},0)}}var n="translate3d(0,0,0)",s={fade:[{fade:!0},
{fade:!0}],"scale-in":[{transform:"scale(0.01)"},{fade:!0}],"scale-out":[{fade:!0},{transform:"scale(0.01)"}],"rotate-left":[{transform:"rotateY(-180deg) perspective(360px)",fade:!0},{transform:"rotateY( 180deg) perspective(360px)",fade:!0}],"rotate-right":[{transform:"rotateY( 180deg) perspective(360px)",fade:!0},{transform:"rotateY(-180deg) perspective(360px)",fade:!0}],"cube-left":[{transform:"translate3d( 50%,0,0) rotateY(-90deg) perspective(360px)"},{transform:"translate3d(-50%,0,0) rotateY( 90deg) perspective(360px)"}],
"cube-right":[{transform:"translate3d(-50%,0,0) rotateY( 90deg) perspective(360px)"},{transform:"translate3d( 50%,0,0) rotateY(-90deg) perspective(360px)"}],"swap-left":[{transform:"translate3d( 65%,0,0) rotateY( 90deg) perspective(360px)"},{transform:"translate3d(-65%,0,0) rotateY(-90deg) perspective(360px)"}],"swap-right":[{transform:"translate3d(-65%,0,0) rotateY(-90deg) perspective(360px)"},{transform:"translate3d( 65%,0,0) rotateY( 90deg) perspective(360px)"}],"explode-in":[{fade:!0,transform:"scale(1.25)"},
{fade:!0}],"explode-out":[{fade:!0},{fade:!0,transform:"scale(1.25)"}],"slide-left":[{transform:"translate3d( 100%,0,0)"},{transform:"translate3d(-100%,0,0)"}],"slide-right":[{transform:"translate3d(-100%,0,0)"},{transform:"translate3d( 100%,0,0)"}],"slide-up":[{transform:"translate3d(0, 100%,0)"},{transform:"translate3d(0,-100%,0)"}],"slide-down":[{transform:"translate3d(0,-100%,0)"},{transform:"translate3d(0, 100%,0)"}]},t={linear:"linear",ease:"ease","ease-in":"ease-in","ease-out":"ease-out","ease-in-out":"ease-in-out",
"step-start":"step-start","step-end":"step-end"};h&&h.extend(h.fn,{swapper:function(a,b,c){a=h(a)[0];this.forEach(function(g){f(g,a,b,c)});return this}});i&&(i.fn.swapper=function(a,b,c){a=i(a)[0];this.each(function(){f(this,a,b,c)});return this});return f}(window,document,window.Zepto,window.jQuery);
